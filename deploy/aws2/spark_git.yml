- name: Provision the master node
  hosts: master
  roles:
    - role: spark-git
      spark_git_version: "2.0.0-preview"
      tags: ["spark", "provision", "provision_spark"]

- name: Provision the regular nodes
  hosts: nodes
  roles:
    - role: spark-git
      spark_git_version: "2.0.0-preview"
      tags: ["spark", "provision", "provision_spark"]

- name: Start services and daemons on master node
  hosts: master
  tasks:
    - name: Start/Restart spark master and slaves
      shell: >-
        {{ spark_home }}/sbin/stop-all.sh &&
        {{ spark_home }}/sbin/start-all.sh

      tags: ["spark", "restart", "restart_spark", "update_spark_configs"]
